# bootstrap-tf
## Terraform State Bootstrapping

This repository contains a script, `bootstrap.sh` in the given cloud, which automates the process of setting up the required Azure resources for Terraform state management. The script initializes a Terraform configuration that provisions an Azure Resource Group, Storage Account, and Blob Container. These resources serve as the backend for Terraform state files, addressing the "chicken and egg" problem in Terraform's backend configuration.

## Prerequisites

Before running the bootstrap script, ensure you have the following prerequisites met:

- Azure CLI installed and configured with an account that has sufficient permissions to create resource groups, storage accounts, and blob containers.
- Terraform CLI installed.

## Running the Script

To run the bootstrap script, follow these steps:

1. Clone the repository to your local machine.
2. Navigate to the cloned repository directory in your terminal.
3. Run the script by typing `./bootstrap.sh` and pressing Enter.
4. Provide the requested input for `owner`, `project`, `location`, and `environment` when prompted. The `workload` input is optional and defaults to `tf` if not provided.

## What the Script Does

Here is a brief overview of what the script performs upon execution:

1. Prompts for user inputs to customize the Terraform configuration.
2. Writes these inputs to a `terraform.tfvars` file, which Terraform uses for variable values.
3. Initializes Terraform and applies the configuration to create the backend resources.
4. Reformats the Terraform files using `terraform fmt`.
5. Re-initializes Terraform to migrate the state to the newly created backend.

After successful execution, the script outputs a message indicating the bootstrap process is complete and advises checking the newly generated `README.md` for next steps.

## Next Steps After Bootstrapping

Once the backend resources are created and configured:

1. You can begin defining your Terraform configurations (`*.tf` files) as per your project requirements.
2. Use the Terraform workflow (`terraform plan`, `terraform apply`, etc.) to manage your infrastructure.
3. Commit and push your changes to this repository to maintain version control of your Terraform configurations.

## Updating and destroying resources
This script generates `terraform.tfvars` for you so you only need to run terraform commands after initial bootstrap is done. 

## Important Notes

- Do not manually edit `terraform.tfstate` files as they reflect the state of your managed infrastructure and are automatically generated by Terraform.
- Ensure to keep the generated `terraform.tfvars` and state files secure, especially since they can contain sensitive information.

## Contribution

For any modifications or improvements to the `bootstrap.sh` script, please follow the contribution guidelines outlined in the `CONTRIBUTING.md` file.

Thank you for using this Terraform state bootstrapping utility!

